/**
 * Syntax highlighting styles
 * Supports both light and dark themes
 */

// Dark theme syntax colors (default)
:root {
    --syntax-bg: #0a0a0a;
    --syntax-comment: #5c6370;
    --syntax-keyword: #c678dd;
    --syntax-string: #98c379;
    --syntax-number: #d19a66;
    --syntax-function: #61afef;
    --syntax-class: #e5c07b;
    --syntax-variable: #e06c75;
    --syntax-operator: #abb2bf;
    --syntax-tag: #e06c75;
    --syntax-attribute: #d19a66;
    --syntax-regex: #56b6c2;
    --syntax-added: rgba(152, 195, 121, 0.15);
    --syntax-deleted: rgba(224, 108, 117, 0.15);
}

// Light theme syntax colors
[data-theme="light"] {
    --syntax-bg: #f6f8fa;
    --syntax-comment: #6a737d;
    --syntax-keyword: #d73a49;
    --syntax-string: #22863a;
    --syntax-number: #005cc5;
    --syntax-function: #6f42c1;
    --syntax-class: #e36209;
    --syntax-variable: #24292e;
    --syntax-operator: #24292e;
    --syntax-tag: #22863a;
    --syntax-attribute: #6f42c1;
    --syntax-regex: #032f62;
    --syntax-added: rgba(34, 134, 58, 0.15);
    --syntax-deleted: rgba(215, 58, 73, 0.15);
}

.highlight {
    background: var(--syntax-bg);
    @extend %vertical-rhythm;
    transition: background-color 0.2s ease;

    .highlighter-rouge & {
        background: var(--syntax-bg);
    }

    // Comments
    .c, .cm, .c1, .cs {
        color: var(--syntax-comment);
        font-style: italic;
    }
    .cp {
        color: var(--syntax-comment);
        font-weight: normal;
    }

    // Errors
    .err {
        color: var(--syntax-variable);
        background-color: transparent;
    }

    // Keywords
    .k, .kd, .kp, .kr, .kc {
        color: var(--syntax-keyword);
    }
    .kt {
        color: var(--syntax-class);
    }

    // Operators
    .o, .ow {
        color: var(--syntax-operator);
    }

    // Strings
    .s, .sb, .sc, .sd, .s2, .sh, .si, .sx, .s1, .ss {
        color: var(--syntax-string);
    }
    .sr {
        color: var(--syntax-regex);
    }
    .se {
        color: var(--syntax-number);
    }

    // Numbers
    .m, .mf, .mh, .mi, .mo, .il {
        color: var(--syntax-number);
    }

    // Names
    .na {
        color: var(--syntax-attribute);
    }
    .nb {
        color: var(--syntax-class);
    }
    .nc {
        color: var(--syntax-class);
    }
    .no {
        color: var(--syntax-number);
    }
    .ni {
        color: var(--syntax-operator);
    }
    .ne {
        color: var(--syntax-variable);
    }
    .nf {
        color: var(--syntax-function);
    }
    .nn {
        color: var(--syntax-class);
    }
    .nt {
        color: var(--syntax-tag);
    }
    .nv, .vc, .vg, .vi {
        color: var(--syntax-variable);
    }
    .bp {
        color: var(--syntax-operator);
    }

    // Generic
    .gd {
        color: var(--syntax-variable);
        background-color: var(--syntax-deleted);
    }
    .gd .x {
        color: var(--syntax-variable);
    }
    .ge {
        font-style: italic;
    }
    .gr {
        color: var(--syntax-variable);
    }
    .gh {
        color: var(--syntax-function);
        font-weight: 600;
    }
    .gi {
        color: var(--syntax-string);
        background-color: var(--syntax-added);
    }
    .gi .x {
        color: var(--syntax-string);
    }
    .go {
        color: var(--syntax-comment);
    }
    .gp {
        color: var(--syntax-comment);
    }
    .gs {
        font-weight: 600;
    }
    .gu {
        color: var(--syntax-function);
    }
    .gt {
        color: var(--syntax-variable);
    }

    // Whitespace
    .w {
        color: var(--syntax-operator);
    }
}

/**
 * Line numbers for code blocks
 */
.highlight .lineno {
    color: var(--text-faint);
    padding-right: 12px;
    border-right: 1px solid var(--border-color);
    margin-right: 12px;
    user-select: none;
}

/**
 * Code block wrapper enhancements
 */
div.highlighter-rouge {
    position: relative;
    margin-bottom: $spacing-unit * 0.6;
}

/**
 * Language indicator
 */
div.highlighter-rouge::before {
    content: attr(data-lang);
    position: absolute;
    top: 0;
    right: 0;
    padding: 4px 10px;
    font-size: 11px;
    color: var(--text-faint);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom-left-radius: 4px;
    background: var(--bg-tertiary);
    transition: background-color 0.2s ease;
}

// Language-specific labels
.language-javascript div.highlighter-rouge::before,
div.highlighter-rouge.language-javascript::before { content: "js"; }
.language-typescript div.highlighter-rouge::before,
div.highlighter-rouge.language-typescript::before { content: "ts"; }
.language-python div.highlighter-rouge::before,
div.highlighter-rouge.language-python::before { content: "py"; }
.language-ruby div.highlighter-rouge::before,
div.highlighter-rouge.language-ruby::before { content: "rb"; }
.language-rust div.highlighter-rouge::before,
div.highlighter-rouge.language-rust::before { content: "rs"; }
.language-go div.highlighter-rouge::before,
div.highlighter-rouge.language-go::before { content: "go"; }
.language-cpp div.highlighter-rouge::before,
div.highlighter-rouge.language-cpp::before { content: "c++"; }
.language-c div.highlighter-rouge::before,
div.highlighter-rouge.language-c::before { content: "c"; }
.language-bash div.highlighter-rouge::before,
div.highlighter-rouge.language-bash::before { content: "sh"; }
.language-shell div.highlighter-rouge::before,
div.highlighter-rouge.language-shell::before { content: "sh"; }
.language-html div.highlighter-rouge::before,
div.highlighter-rouge.language-html::before { content: "html"; }
.language-css div.highlighter-rouge::before,
div.highlighter-rouge.language-css::before { content: "css"; }
.language-scss div.highlighter-rouge::before,
div.highlighter-rouge.language-scss::before { content: "scss"; }
.language-json div.highlighter-rouge::before,
div.highlighter-rouge.language-json::before { content: "json"; }
.language-yaml div.highlighter-rouge::before,
div.highlighter-rouge.language-yaml::before { content: "yaml"; }
.language-sql div.highlighter-rouge::before,
div.highlighter-rouge.language-sql::before { content: "sql"; }
.language-java div.highlighter-rouge::before,
div.highlighter-rouge.language-java::before { content: "java"; }
.language-kotlin div.highlighter-rouge::before,
div.highlighter-rouge.language-kotlin::before { content: "kt"; }
.language-swift div.highlighter-rouge::before,
div.highlighter-rouge.language-swift::before { content: "swift"; }
.language-markdown div.highlighter-rouge::before,
div.highlighter-rouge.language-markdown::before { content: "md"; }
