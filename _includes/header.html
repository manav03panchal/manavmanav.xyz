<header class="site-header" role="banner">
  <div class="wrapper">
    <div class="header-wrapper">
      <a class="site-title" rel="author" href="{{ "/" | relative_url }}">{{ site.title | escape }}</a>

      <div class="header-right">
        {%- assign default_paths = site.pages | map: "path" -%}
        {%- assign page_paths = site.header_pages | default: default_paths -%}

        <nav class="site-nav" id="site-nav">
          {%- for path in page_paths -%}
            {%- assign my_page = site.pages | where: "path", path | first -%}
            {%- if my_page.title -%}
              <a class="page-link" href="{{ my_page.url | relative_url }}">{{ my_page.title | escape }}</a>
            {%- endif -%}
          {%- endfor -%}
        </nav>

        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme" title="Toggle light/dark theme">
          <span class="sun-icon">light</span>
          <span class="moon-icon" style="display: none;">dark</span>
        </button>

        <button class="nav-toggle" id="nav-toggle" aria-label="Open menu">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile nav toggle
  (function() {
    const navToggle = document.getElementById('nav-toggle');
    const siteNav = document.getElementById('site-nav');

    if (navToggle && siteNav) {
      navToggle.addEventListener('click', function() {
        siteNav.classList.toggle('nav-open');
        document.body.style.overflow = siteNav.classList.contains('nav-open') ? 'hidden' : '';
      });

      // Close on link click
      siteNav.querySelectorAll('.page-link').forEach(link => {
        link.addEventListener('click', () => {
          siteNav.classList.remove('nav-open');
          document.body.style.overflow = '';
        });
      });

      // Close on escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && siteNav.classList.contains('nav-open')) {
          siteNav.classList.remove('nav-open');
          document.body.style.overflow = '';
        }
      });
    }
  })();
</script>
